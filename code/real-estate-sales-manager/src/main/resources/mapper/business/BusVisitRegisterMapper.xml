<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zx.business.dao.BusVisitRegisterMapper">
    <resultMap id="BaseResultMap" type="com.zx.business.model.BusVisitRegister">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Aug 06 13:45:41 CST 2020.
        -->
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="real_estate_id" jdbcType="INTEGER" property="realEstateId"/>
        <result column="real_estate_name" jdbcType="VARCHAR" property="realEstateName"/>
        <result column="customer" jdbcType="VARCHAR" property="customer"/>
        <result column="phone" jdbcType="VARCHAR" property="phone"/>
        <result column="team" jdbcType="VARCHAR" property="team"/>
        <result column="adviser" jdbcType="VARCHAR" property="adviser"/>
        <result column="address" jdbcType="VARCHAR" property="address"/>
        <result column="occupation" jdbcType="VARCHAR" property="occupation"/>
        <result column="times" jdbcType="VARCHAR" property="times"/>
        <result column="purpose" jdbcType="VARCHAR" property="purpose"/>
        <result column="payment" jdbcType="VARCHAR" property="payment"/>
        <result column="product_type" jdbcType="VARCHAR" property="productType"/>
        <result column="area" jdbcType="VARCHAR" property="area"/>
        <result column="level" jdbcType="VARCHAR" property="level"/>
        <result column="intention" jdbcType="VARCHAR" property="intention"/>
        <result column="nodeal" jdbcType="VARCHAR" property="nodeal"/>
        <result column="property" jdbcType="VARCHAR" property="property"/>
        <result column="reporter" jdbcType="VARCHAR" property="reporter"/>
        <result column="remark" jdbcType="VARCHAR" property="remark"/>
        <result column="createtime" jdbcType="TIMESTAMP" property="createtime"/>
        <result column="visittime" jdbcType="TIMESTAMP" property="visittime"/>
        <result column="createrid" jdbcType="INTEGER" property="createrid"/>
    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Aug 06 13:45:41 CST 2020.
        -->
        `id`, `real_estate_id`, `real_estate_name`, `customer`, `phone`, `team`, `adviser`,
        `address`, `occupation`, `times`, `purpose`, `payment`, `product_type`, `area`, `level`,
        `intention`, `nodeal`, `property`, `reporter`, `remark`, `createtime`, `visittime`, `createrid`
    </sql>

    <sql id="base_condition_filed">
        <if test="createrid != null">
            and createrid = #{createrid}
        </if>
        <if test="real_estate_id != null">
            and real_estate_id = #{real_estate_id}
        </if>
        <if test="team != null and team!=''">
            and team = #{team}
        </if>
        <if test="level != null and level!=''">
            and level = #{level}
        </if>
        <if test="times != null and times!=''">
            and times = #{times}
        </if>
        <if test="property != null and property!=''">
            and property = #{property}
        </if>
        <if test="purpose != null and purpose!=''">
            and purpose = #{purpose}
        </if>
        <if test="payment != null and payment!=''">
            and payment = #{payment}
        </if>
        <if test="intention != null and intention!=''">
            and intention = #{intention}
        </if>
        <if test="startDateTime != null">
            and <![CDATA[ createtime >= #{startDateTime}  ]]>
        </if>
        <if test="endDateTime != null">
            and  <![CDATA[ createtime <= #{endDateTime}  ]]>
        </if>

    </sql>
    <!-- 通用查询条件列-->
    <sql id="query_condition">
        <where>
            <trim prefixOverrides="and">
                <include refid="base_condition_filed"/>
            </trim>
        </where>
    </sql>

    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from bus_visit_register
        where id = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Thu Aug 06 13:45:41 CST 2020.
        -->
        delete from bus_visit_register
        where `id` = #{id,jdbcType=INTEGER}
    </delete>
    <insert id="insert" useGeneratedKeys="true" keyProperty="id" parameterType="com.zx.business.model.BusVisitRegister">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <selectKey keyProperty="id" resultType="Integer" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into bus_visit_register (`id`, `real_estate_id`, `real_estate_name`,
        `customer`, `phone`, `team`,
        `adviser`, `address`, `occupation`,
        `times`, `purpose`, `payment`,
        `product_type`, `area`, `level`,
        `intention`, `nodeal`, `property`,
        `reporter`, `remark`, `createtime`, `visittime`, `createrid`
        )
        values (#{id,jdbcType=INTEGER}, #{realEstateId,jdbcType=INTEGER}, #{realEstateName,jdbcType=VARCHAR},
        #{customer,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR}, #{team,jdbcType=VARCHAR},
        #{adviser,jdbcType=VARCHAR}, #{address,jdbcType=VARCHAR}, #{occupation,jdbcType=VARCHAR},
        #{times,jdbcType=VARCHAR}, #{purpose,jdbcType=VARCHAR}, #{payment,jdbcType=VARCHAR},
        #{productType,jdbcType=VARCHAR}, #{area,jdbcType=VARCHAR}, #{level,jdbcType=VARCHAR},
        #{intention,jdbcType=VARCHAR}, #{nodeal,jdbcType=VARCHAR}, #{property,jdbcType=VARCHAR},
        #{reporter,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR},
        #{createtime,jdbcType=TIMESTAMP},#{visittime,jdbcType=TIMESTAMP},
        #{createrid,jdbcType=INTEGER}
        )
    </insert>

    <update id="updateByPrimaryKey" parameterType="com.zx.business.model.BusVisitRegister">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update bus_visit_register
        set `real_estate_id` = #{realEstateId,jdbcType=INTEGER},
        `real_estate_name` = #{realEstateName,jdbcType=VARCHAR},
        `customer` = #{customer,jdbcType=VARCHAR},
        `phone` = #{phone,jdbcType=VARCHAR},
        `team` = #{team,jdbcType=VARCHAR},
        `adviser` = #{adviser,jdbcType=VARCHAR},
        `address` = #{address,jdbcType=VARCHAR},
        `occupation` = #{occupation,jdbcType=VARCHAR},
        `times` = #{times,jdbcType=VARCHAR},
        `purpose` = #{purpose,jdbcType=VARCHAR},
        `payment` = #{payment,jdbcType=VARCHAR},
        `product_type` = #{productType,jdbcType=VARCHAR},
        `area` = #{area,jdbcType=VARCHAR},
        `level` = #{level,jdbcType=VARCHAR},
        `intention` = #{intention,jdbcType=VARCHAR},
        `nodeal` = #{nodeal,jdbcType=VARCHAR},
        `property` = #{property,jdbcType=VARCHAR},
        `reporter` = #{reporter,jdbcType=VARCHAR},
        `remark` = #{remark,jdbcType=VARCHAR},
        `createtime` = #{createtime,jdbcType=TIMESTAMP},
        `visittime` = #{visittime,jdbcType=TIMESTAMP},
        `createrid` = #{createrid,jdbcType=INTEGER}
        where `id` = #{id,jdbcType=INTEGER}
    </update>

    <select id="selectByPage" parameterType="com.zx.business.model.BusVisitRegister" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from bus_visit_register
        <include refid="query_condition"/>
        <if test="orderField != null">
            order by ${orderField}
        </if>
        <if test="orderType != null">
            ${orderType}
        </if>
        <if test="start!=null and pageSize!=null">
            limit #{start},#{pageSize}
        </if>
    </select>

    <select id="countByModel" parameterType="com.zx.business.model.BusVisitRegister" resultType="java.lang.Integer">
        select
        count(1)
        from bus_visit_register
        <include refid="query_condition"/>
    </select>
</mapper>